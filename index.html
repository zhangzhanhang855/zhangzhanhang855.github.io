<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>æ–—åœ°ä¸»äººæœºå¯¹æˆ˜</title>
<style>
body{background:#114422;color:white;font-family:Arial;text-align:center}
.card{display:inline-block;padding:6px 10px;margin:4px;border:1px solid #fff;border-radius:6px;background:#1f7a4d;cursor:pointer}
.selected{background:#ffd966;color:black}
.area{margin:15px}
button{padding:8px 16px;border:none;border-radius:8px;cursor:pointer}
</style>
</head>
<body>
<h1>ğŸƒ æ–—åœ°ä¸»ï¼ˆäººæœºå¯¹æˆ˜ç®€åŒ–ç‰ˆï¼‰</h1>
<p>è§„åˆ™ï¼šç®€åŒ–ä¸ºå•å¼ å‡ºç‰Œï¼Œæ¯”å¤§å°ï¼ˆ3æœ€å°ï¼Œç‹æœ€å¤§ï¼‰</p>

<div class="area">
<h2>ä½ çš„æ‰‹ç‰Œ</h2>
<div id="player"></div>
</div>

<div class="area">
<button onclick="playCard()">å‡ºç‰Œ</button>
<button onclick="passTurn()">ä¸è¦</button>
<button onclick="startGame()">é‡æ–°å¼€å§‹</button>
</div>

<div class="area">
<h2>ç”µè„‘Aå‰©ä½™ï¼š<span id="ai1">17</span> å¼ </h2>
<h2>ç”µè„‘Bå‰©ä½™ï¼š<span id="ai2">17</span> å¼ </h2>
</div>

<h2>å½“å‰ç‰Œï¼š<span id="current">æ— </span></h2>

<script>
const ranks=['3','4','5','6','7','8','9','10','J','Q','K','A','2','å°ç‹','å¤§ç‹'];
let deck=[];
let playerHand=[], ai1Hand=[], ai2Hand=[];
let currentCard=null;
let selectedIndex=null;

function buildDeck(){
  deck=[];
  for(let i=0;i<13;i++){
    for(let j=0;j<4;j++) deck.push(ranks[i]);
  }
  deck.push('å°ç‹','å¤§ç‹');
}

function shuffle(){
  for(let i=deck.length-1;i>0;i--){
    let r=Math.floor(Math.random()*(i+1));
    [deck[i],deck[r]]=[deck[r],deck[i]];
  }
}

function startGame(){
  buildDeck(); shuffle();
  playerHand=deck.slice(0,17);
  ai1Hand=deck.slice(17,34);
  ai2Hand=deck.slice(34,51);
  currentCard=null;
  render();
}

function render(){
  const p=document.getElementById('player');
  p.innerHTML='';
  playerHand.forEach((c,i)=>{
    const d=document.createElement('div');
    d.className='card'+(selectedIndex===i?' selected':'');
    d.innerText=c;
    d.onclick=()=>selectedIndex=i;
    p.appendChild(d);
  });
  document.getElementById('ai1').innerText=ai1Hand.length;
  document.getElementById('ai2').innerText=ai2Hand.length;
  document.getElementById('current').innerText=currentCard||'æ— ';
}

function rankValue(c){ return ranks.indexOf(c); }

function playCard(){
  if(selectedIndex===null) return;
  const card=playerHand[selectedIndex];
  if(currentCard && rankValue(card)<=rankValue(currentCard)){
    alert('å¿…é¡»å‡ºæ›´å¤§çš„ç‰Œï¼'); return;
  }
  currentCard=card;
  playerHand.splice(selectedIndex,1);
  selectedIndex=null;
  aiTurn(ai1Hand);
  aiTurn(ai2Hand);
  checkWin();
  render();
}

function aiTurn(hand){
  let playable=hand.filter(c=>!currentCard||rankValue(c)>rankValue(currentCard));
  if(playable.length===0) return;
  playable.sort((a,b)=>rankValue(a)-rankValue(b));
  currentCard=playable[0];
  hand.splice(hand.indexOf(currentCard),1);
}

function passTurn(){ currentCard=null; }

function checkWin(){
  if(playerHand.length===0) alert('ğŸ‰ ä½ èµ¢äº†ï¼');
  if(ai1Hand.length===0||ai2Hand.length===0) alert('ğŸ˜µ ç”µè„‘èµ¢äº†ï¼');
}

startGame();
</script>
</body>
</html>
